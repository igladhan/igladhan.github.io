<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Reasoning Timelines | AI Learning Lab</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        violetpulse: '#a855f7',
                        aurora: '#34d399',
                    },
                    fontFamily: {
                        inter: ['Inter', 'sans-serif'],
                    },
                },
            },
        };
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet" />
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: radial-gradient(circle at 20% 15%, rgba(168, 85, 247, 0.12), transparent 45%),
                radial-gradient(circle at 80% 10%, rgba(56, 189, 248, 0.1), transparent 45%),
                #020617;
        }
        .timeline-step {
            border-radius: 20px;
            border: 1px solid rgba(124, 58, 237, 0.35);
            background: rgba(15, 23, 42, 0.65);
            transition: border 0.3s ease, transform 0.3s ease, box-shadow 0.3s ease;
        }
        .timeline-step.active {
            border-color: rgba(168, 85, 247, 0.7);
            box-shadow: 0 18px 45px -28px rgba(168, 85, 247, 0.7);
            transform: translateY(-4px);
        }
        .timeline-step.completed {
            border-color: rgba(34, 197, 94, 0.65);
        }
        .fact-card, .rule-card {
            border-radius: 18px;
            border: 1px solid rgba(148, 163, 184, 0.3);
            background: rgba(15, 23, 42, 0.6);
        }
        .log-panel {
            max-height: 220px;
            overflow-y: auto;
        }
        .log-panel::-webkit-scrollbar {
            width: 6px;
        }
        .log-panel::-webkit-scrollbar-thumb {
            background: rgba(168, 85, 247, 0.4);
            border-radius: 9999px;
        }
    </style>
</head>
<body class="text-slate-100 min-h-screen flex flex-col">
    <header class="bg-slate-950/80 border-b border-slate-800 backdrop-blur sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between py-5">
                <a href="index.html" class="flex items-center gap-3">
                    <div class="h-11 w-11 rounded-xl bg-gradient-to-br from-violetpulse via-indigo-500 to-cyan-500 flex items-center justify-center font-bold text-slate-950 text-xl">RG</div>
                    <span class="text-lg font-semibold tracking-wide">AI Learning Lab</span>
                </a>
                <nav class="hidden md:flex items-center gap-8 text-sm font-medium text-slate-300">
                    <a href="machine-learning.html" class="hover:text-white transition">Machine Learning</a>
                    <a href="neural-networks.html" class="hover:text-white transition">Neural Networks</a>
                    <a href="reinforcement-learning.html" class="hover:text-white transition">Reinforcement Learning</a>
                    <a href="reasoning.html" class="text-violet-200">Reasoning</a>
                    <a href="hierarchical-reasoning.html" class="hover:text-white transition">Hierarchical Reasoning</a>
                </nav>
                <button id="mobile-menu-button" class="md:hidden text-slate-200">
                    <svg class="h-7 w-7" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                        <path stroke-linecap="round" d="M4 6h16M4 12h16M4 18h16" />
                    </svg>
                </button>
            </div>
            <div id="mobile-menu" class="md:hidden hidden pb-6">
                <nav class="flex flex-col gap-3 text-sm font-medium text-slate-200">
                    <a href="machine-learning.html" class="hover:text-white transition">Machine Learning</a>
                    <a href="neural-networks.html" class="hover:text-white transition">Neural Networks</a>
                    <a href="reinforcement-learning.html" class="hover:text-white transition">Reinforcement Learning</a>
                    <a href="reasoning.html" class="text-violet-200">Reasoning</a>
                    <a href="hierarchical-reasoning.html" class="hover:text-white transition">Hierarchical Reasoning</a>
                </nav>
            </div>
        </div>
    </header>

    <main class="flex-1">
        <section class="relative border-b border-slate-800/60 overflow-hidden">
            <div class="absolute -top-32 right-0 h-96 w-96 rounded-full bg-violetpulse/20 blur-3xl"></div>
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 relative">
                <a href="index.html" class="inline-flex items-center text-sm text-slate-400 hover:text-white">
                    ← Back to overview
                </a>
                <div class="mt-6 max-w-3xl">
                    <h1 class="text-4xl font-bold text-white">Reasoning timelines</h1>
                    <p class="mt-4 text-lg text-slate-300">
                        Select a scenario, then step through the inference chain as facts activate rules and lead to conclusions. Adjust pacing or play automatically to see how structured reasoning unfolds.
                    </p>
                </div>
                <div class="mt-10 grid gap-6 sm:grid-cols-3">
                    <div class="rounded-2xl border border-slate-800 bg-slate-900/60 p-4">
                        <p class="text-xs uppercase tracking-wide text-slate-400">Current scenario</p>
                        <p class="mt-2 text-lg font-semibold text-white" id="scenario-name">—</p>
                        <p class="mt-1 text-xs text-slate-500" id="scenario-summary">Choose a scenario to begin.</p>
                    </div>
                    <div class="rounded-2xl border border-slate-800 bg-slate-900/60 p-4">
                        <p class="text-xs uppercase tracking-wide text-slate-400">Reasoning step</p>
                        <p class="mt-2 text-2xl font-semibold text-white" id="step-index">0</p>
                        <p class="mt-1 text-xs text-slate-500">Position in the inference chain</p>
                    </div>
                    <div class="rounded-2xl border border-slate-800 bg-slate-900/60 p-4">
                        <p class="text-xs uppercase tracking-wide text-slate-400">Conclusion</p>
                        <p class="mt-2 text-lg font-semibold text-emerald-300" id="conclusion-text">—</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="py-16">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="grid gap-10 lg:grid-cols-[1.4fr,1fr]">
                    <div class="rounded-[28px] border border-slate-800 bg-slate-950/70 p-6">
                        <div class="flex flex-col gap-4 sm:flex-row sm:items-end sm:justify-between">
                            <div>
                                <h2 class="text-2xl font-semibold text-white">Reasoning control center</h2>
                                <p class="text-sm text-slate-400">Facts trigger rules that produce new facts and ultimately the conclusion.</p>
                            </div>
                            <div class="flex flex-col gap-4 sm:w-72">
                                <label class="text-xs uppercase tracking-wide text-slate-400" for="scenario-select">Scenario</label>
                                <select id="scenario-select" class="rounded-2xl border border-slate-700 bg-slate-900/70 px-4 py-2 text-sm text-slate-200 focus:border-violetpulse focus:outline-none">
                                </select>
                            </div>
                        </div>
                        <div class="mt-8 grid gap-6 lg:grid-cols-2">
                            <div>
                                <p class="text-xs uppercase tracking-wide text-slate-400">Facts</p>
                                <div id="facts-list" class="mt-3 space-y-2 text-sm text-slate-300"></div>
                            </div>
                            <div>
                                <p class="text-xs uppercase tracking-wide text-slate-400">Inference rules</p>
                                <div id="rules-list" class="mt-3 space-y-2 text-sm text-slate-300"></div>
                            </div>
                        </div>
                        <div class="mt-10">
                            <div class="flex flex-wrap items-center gap-4">
                                <button id="play-button" class="rounded-full bg-gradient-to-r from-violetpulse to-indigo-500 px-5 py-2 text-sm font-semibold text-slate-950 shadow-lg shadow-violetpulse/30 hover:shadow-xl hover:shadow-indigo-500/40">Play reasoning</button>
                                <button id="step-button" class="rounded-full border border-slate-700 px-5 py-2 text-sm font-semibold text-slate-200 hover:border-violetpulse hover:text-white">Step</button>
                                <button id="reset-button" class="rounded-full border border-slate-700 px-5 py-2 text-sm font-semibold text-slate-200 hover:border-emerald-400 hover:text-white">Reset</button>
                                <div class="flex items-center gap-3">
                                    <label for="speed-range" class="text-xs uppercase tracking-wide text-slate-400">Speed</label>
                                    <input id="speed-range" type="range" min="300" max="1500" step="100" value="800" class="accent-violetpulse" />
                                    <span id="speed-label" class="text-xs font-semibold text-slate-300">0.8s</span>
                                </div>
                            </div>
                            <div class="mt-6 log-panel space-y-2 text-xs text-slate-300" id="reasoning-log"></div>
                        </div>
                    </div>
                    <div class="rounded-[28px] border border-slate-800 bg-slate-950/70 p-6">
                        <h3 class="text-xl font-semibold text-white">Inference timeline</h3>
                        <div id="timeline" class="mt-4 space-y-3"></div>
                    </div>
                </div>
                <div class="mt-16 grid gap-10 lg:grid-cols-2">
                    <div class="rounded-[26px] border border-slate-800 bg-slate-950/70 p-6">
                        <h3 class="text-xl font-semibold text-white">How to read the timeline</h3>
                        <ul class="mt-4 space-y-3 text-sm text-slate-300">
                            <li><span class="font-semibold text-violet-300">Facts:</span> Purple cards represent observations or data points you start with.</li>
                            <li><span class="font-semibold text-violet-300">Rules:</span> Violet pulses show when a rule’s conditions are satisfied.</li>
                            <li><span class="font-semibold text-violet-300">Conclusions:</span> Emerald cards mark newly derived facts or the final answer.</li>
                        </ul>
                    </div>
                    <div class="rounded-[26px] border border-slate-800 bg-slate-950/70 p-6">
                        <h3 class="text-xl font-semibold text-white">Experiment suggestions</h3>
                        <ol class="mt-4 space-y-3 text-sm text-slate-300 list-decimal list-inside">
                            <li>Switch scenarios to compare medical diagnosis, logistics, and tutoring reasoning.</li>
                            <li>Change the playback speed to see how inference timing affects comprehension.</li>
                            <li>Use step mode to inspect the exact rule that fires at each stage.</li>
                        </ol>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="border-t border-slate-800/60 bg-slate-950/80">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 text-sm text-slate-400 flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between">
            <p>© <span id="footer-year"></span> AI Learning Lab.</p>
            <p>Trace how structured inference transforms observations into decisions.</p>
        </div>
    </footer>

    <script>
        const mobileBtn = document.getElementById('mobile-menu-button');
        const mobileNav = document.getElementById('mobile-menu');
        if (mobileBtn && mobileNav) {
            mobileBtn.addEventListener('click', () => mobileNav.classList.toggle('hidden'));
        }
        const yearTarget = document.getElementById('footer-year');
        if (yearTarget) yearTarget.textContent = new Date().getFullYear();

        const scenarios = [
            {
                id: 'medical',
                name: 'Medical triage assistant',
                summary: 'Evaluate symptoms to recommend urgency level for a patient.',
                facts: [
                    'Patient reports chest tightness',
                    'Heart rate is elevated at 118 bpm',
                    'Patient has a history of mild asthma',
                ],
                rules: [
                    'If chest pain is present and heart rate > 110 → suspect cardiovascular stress',
                    'If cardiovascular stress and breathing difficulty → mark case as urgent',
                    'If urgent case and facility busy → alert on-call cardiologist',
                ],
                steps: [
                    { type: 'fact', text: 'Captured initial symptoms and vitals from intake interview.' },
                    { type: 'rule', text: 'Rule 1 fired: chest pain + high heart rate → cardiovascular stress hypothesis.' },
                    { type: 'fact', text: 'New fact added: cardiovascular stress suspected.' },
                    { type: 'rule', text: 'Rule 2 fired: cardiovascular stress + breathing difficulty → urgent case.' },
                    { type: 'fact', text: 'Conclusion: patient requires urgent evaluation.' },
                    { type: 'rule', text: 'Rule 3 fired: urgent case + busy facility → notify on-call cardiologist.' },
                    { type: 'conclusion', text: 'Action: send a high-priority alert to the cardiology team.' },
                ],
                conclusion: 'Send urgent cardiology alert within 2 minutes.',
            },
            {
                id: 'logistics',
                name: 'Logistics planning',
                summary: 'Coordinate drone deliveries while weather fronts shift.',
                facts: [
                    'Two deliveries pending within 12 km radius',
                    'Wind speed increasing to 30 km/h from the west',
                    'Battery reserve on drone B is 35%',
                ],
                rules: [
                    'If wind > 25 km/h and route westbound → reroute or delay',
                    'If battery < 40% and payload heavy → assign recharge cycle first',
                    'If reroute and recharge needed → reassign order to backup drone',
                ],
                steps: [
                    { type: 'fact', text: 'Weather service update indicates gusty westbound winds.' },
                    { type: 'rule', text: 'Rule 1 fired: westbound path unsafe → mark delivery #2 for reroute.' },
                    { type: 'fact', text: 'New fact: delivery #2 must avoid west corridor.' },
                    { type: 'rule', text: 'Rule 2 fired: drone B battery low with heavy payload → send to recharge.' },
                    { type: 'rule', text: 'Rule 3 fired: reroute + recharge → assign backup drone A.' },
                    { type: 'conclusion', text: 'Action: Drone A handles delivery #2 via southern route.' },
                ],
                conclusion: 'Reassign delivery #2 to drone A with a southern detour.',
            },
            {
                id: 'tutoring',
                name: 'Personalized tutoring',
                summary: 'Determine the next lesson for a learner based on their performance.',
                facts: [
                    'Student mastered linear equations last session',
                    'Recent quiz shows difficulty with word problems',
                    'Student prefers visual explanations',
                ],
                rules: [
                    'If mastery on linear equations and struggling with word problems → introduce contextual practice',
                    'If student prefers visuals → select video-based lesson',
                    'If contextual practice and video format → queue interactive story problems',
                ],
                steps: [
                    { type: 'fact', text: 'Analyzed latest quiz and study notes.' },
                    { type: 'rule', text: 'Rule 1 fired: ready for contextual word-problem practice.' },
                    { type: 'fact', text: 'New fact: lesson focus should be story problems.' },
                    { type: 'rule', text: 'Rule 2 fired: adapt plan to include visual content.' },
                    { type: 'rule', text: 'Rule 3 fired: combine visual content with contextual practice.' },
                    { type: 'conclusion', text: 'Action: assign interactive visual story problems.' },
                ],
                conclusion: 'Assign interactive, visual word-problem practice next.',
            },
        ];

        const scenarioSelect = document.getElementById('scenario-select');
        const scenarioName = document.getElementById('scenario-name');
        const scenarioSummary = document.getElementById('scenario-summary');
        const conclusionText = document.getElementById('conclusion-text');
        const factsList = document.getElementById('facts-list');
        const rulesList = document.getElementById('rules-list');
        const timeline = document.getElementById('timeline');
        const stepIndex = document.getElementById('step-index');
        const reasoningLog = document.getElementById('reasoning-log');
        const playButton = document.getElementById('play-button');
        const stepButton = document.getElementById('step-button');
        const resetButton = document.getElementById('reset-button');
        const speedRange = document.getElementById('speed-range');
        const speedLabel = document.getElementById('speed-label');

        let activeScenario = scenarios[0];
        let currentStep = -1;
        let playInterval = null;

        scenarios.forEach((scenario) => {
            const option = document.createElement('option');
            option.value = scenario.id;
            option.textContent = scenario.name;
            scenarioSelect.appendChild(option);
        });
        scenarioSelect.value = activeScenario.id;

        function renderFactsAndRules() {
            factsList.innerHTML = activeScenario.facts
                .map((fact) => `<div class="fact-card px-4 py-3">• ${fact}</div>`)
                .join('');
            rulesList.innerHTML = activeScenario.rules
                .map((rule, index) => `<div class="rule-card px-4 py-3"><span class="text-violet-200 font-semibold">Rule ${index + 1}:</span> ${rule}</div>`)
                .join('');
        }

        function renderTimeline() {
            timeline.innerHTML = '';
            activeScenario.steps.forEach((step, index) => {
                const card = document.createElement('div');
                card.className = 'timeline-step p-4';
                card.dataset.index = index;
                const badgeColor = step.type === 'fact' ? 'bg-violet-500/20 text-violet-200' : step.type === 'rule' ? 'bg-indigo-500/20 text-indigo-200' : 'bg-emerald-500/20 text-emerald-200';
                const badgeLabel = step.type === 'fact' ? 'Fact' : step.type === 'rule' ? 'Rule' : 'Conclusion';
                card.innerHTML = `
                    <div class="flex items-center justify-between">
                        <span class="inline-flex items-center rounded-full px-3 py-1 text-xs font-semibold ${badgeColor}">${badgeLabel}</span>
                        <span class="text-xs text-slate-500">Step ${index + 1}</span>
                    </div>
                    <p class="mt-3 text-sm text-slate-200">${step.text}</p>
                `;
                timeline.appendChild(card);
            });
        }

        function updateScenarioInfo() {
            scenarioName.textContent = activeScenario.name;
            scenarioSummary.textContent = activeScenario.summary;
            conclusionText.textContent = activeScenario.conclusion;
        }

        function resetTimelineHighlights() {
            timeline.querySelectorAll('.timeline-step').forEach((card) => {
                card.classList.remove('active', 'completed');
            });
            currentStep = -1;
            stepIndex.textContent = '0';
            reasoningLog.innerHTML = '';
        }

        function highlightStep(index) {
            const cards = Array.from(timeline.children);
            cards.forEach((card, idx) => {
                card.classList.toggle('active', idx === index);
                if (idx < index) {
                    card.classList.add('completed');
                }
            });
            stepIndex.textContent = (index + 1).toString();
            const logEntry = document.createElement('div');
            logEntry.className = 'rounded-xl border border-slate-800 bg-slate-900/50 px-3 py-2';
            logEntry.textContent = activeScenario.steps[index].text;
            reasoningLog.prepend(logEntry);
            while (reasoningLog.children.length > 8) {
                reasoningLog.removeChild(reasoningLog.lastChild);
            }
        }

        function stopPlayback() {
            if (playInterval) {
                clearInterval(playInterval);
                playInterval = null;
            }
            playButton.textContent = 'Play reasoning';
        }

        function playNextStep() {
            if (currentStep >= activeScenario.steps.length - 1) {
                stopPlayback();
                return;
            }
            currentStep += 1;
            highlightStep(currentStep);
            if (currentStep >= activeScenario.steps.length - 1) {
                stopPlayback();
            }
        }

        playButton.addEventListener('click', () => {
            if (playInterval) {
                stopPlayback();
                return;
            }
            playButton.textContent = 'Pause reasoning';
            playNextStep();
            playInterval = setInterval(playNextStep, parseInt(speedRange.value, 10));
        });

        stepButton.addEventListener('click', () => {
            stopPlayback();
            playNextStep();
        });

        resetButton.addEventListener('click', () => {
            stopPlayback();
            resetTimelineHighlights();
        });

        scenarioSelect.addEventListener('change', () => {
            const next = scenarios.find((scenario) => scenario.id === scenarioSelect.value);
            if (!next) return;
            activeScenario = next;
            updateScenarioInfo();
            renderFactsAndRules();
            renderTimeline();
            resetTimelineHighlights();
        });

        speedRange.addEventListener('input', () => {
            const speed = parseInt(speedRange.value, 10);
            speedLabel.textContent = `${(speed / 1000).toFixed(1)}s`;
            if (playInterval) {
                stopPlayback();
                playButton.click();
            }
        });

        updateScenarioInfo();
        renderFactsAndRules();
        renderTimeline();
        resetTimelineHighlights();
    </script>
</body>
</html>
