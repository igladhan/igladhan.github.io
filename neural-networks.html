<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Neural Network Activations | AI Learning Lab</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        aurora: '#34d399',
                        magenta: '#f472b6',
                        midnight: '#020617',
                    },
                    fontFamily: {
                        inter: ['Inter', 'sans-serif'],
                    },
                },
            },
        };
    </script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet" />
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: radial-gradient(circle at 15% 20%, rgba(244, 114, 182, 0.08), transparent 45%),
                radial-gradient(circle at 80% 10%, rgba(52, 211, 153, 0.12), transparent 45%),
                #020617;
        }
        .neuron {
            width: 90px;
            height: 90px;
            border-radius: 9999px;
            border: 1px solid rgba(148, 163, 184, 0.35);
            background: radial-gradient(circle at center, rgba(52, 211, 153, 0.25), rgba(15, 23, 42, 0.9) 70%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 4px;
            transition: transform 0.35s ease, box-shadow 0.35s ease, background 0.35s ease;
        }
        .neuron.active {
            transform: translateY(-6px);
            box-shadow: 0 18px 45px -28px rgba(52, 211, 153, 0.8);
        }
        .neuron span.value {
            font-size: 0.85rem;
            font-weight: 600;
            color: #f8fafc;
        }
        .neuron span.label {
            font-size: 0.75rem;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: rgba(148, 163, 184, 0.9);
        }
        svg.connection-layer line {
            transition: stroke 0.35s ease, stroke-width 0.35s ease;
        }
        .activations-panel {
            background: rgba(15, 23, 42, 0.65);
            border-radius: 26px;
            border: 1px solid rgba(71, 85, 105, 0.4);
        }
        .insight-card {
            border-radius: 22px;
            border: 1px solid rgba(148, 163, 184, 0.25);
            background: rgba(15, 23, 42, 0.7);
        }
    </style>
</head>
<body class="text-slate-100 min-h-screen flex flex-col">
    <header class="bg-slate-950/80 border-b border-slate-800 backdrop-blur sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between py-5">
                <a href="index.html" class="flex items-center gap-3">
                    <div class="h-11 w-11 rounded-xl bg-gradient-to-br from-aurora via-magenta to-indigo-500 flex items-center justify-center font-bold text-slate-950 text-xl">NN</div>
                    <span class="text-lg font-semibold tracking-wide">AI Learning Lab</span>
                </a>
                <nav class="hidden md:flex items-center gap-8 text-sm font-medium text-slate-300">
                    <a href="machine-learning.html" class="hover:text-white transition">Machine Learning</a>
                    <a href="neural-networks.html" class="text-emerald-300">Neural Networks</a>
                    <a href="reinforcement-learning.html" class="hover:text-white transition">Reinforcement Learning</a>
                    <a href="reasoning.html" class="hover:text-white transition">Reasoning</a>
                    <a href="hierarchical-reasoning.html" class="hover:text-white transition">Hierarchical Reasoning</a>
                </nav>
                <button id="mobile-menu-button" class="md:hidden text-slate-200">
                    <svg class="h-7 w-7" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                        <path stroke-linecap="round" d="M4 6h16M4 12h16M4 18h16" />
                    </svg>
                </button>
            </div>
            <div id="mobile-menu" class="md:hidden hidden pb-6">
                <nav class="flex flex-col gap-3 text-sm font-medium text-slate-200">
                    <a href="machine-learning.html" class="hover:text-white transition">Machine Learning</a>
                    <a href="neural-networks.html" class="text-emerald-300">Neural Networks</a>
                    <a href="reinforcement-learning.html" class="hover:text-white transition">Reinforcement Learning</a>
                    <a href="reasoning.html" class="hover:text-white transition">Reasoning</a>
                    <a href="hierarchical-reasoning.html" class="hover:text-white transition">Hierarchical Reasoning</a>
                </nav>
            </div>
        </div>
    </header>

    <main class="flex-1">
        <section class="relative border-b border-slate-800/60 overflow-hidden">
            <div class="absolute -top-32 right-0 h-96 w-96 rounded-full bg-emerald-500/15 blur-3xl"></div>
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 relative">
                <a href="index.html" class="inline-flex items-center text-sm text-slate-400 hover:text-white">
                    ← Back to overview
                </a>
                <div class="mt-6 max-w-3xl">
                    <h1 class="text-4xl font-bold text-white">Neural activations in real time</h1>
                    <p class="mt-4 text-lg text-slate-300">
                        Adjust input features and watch activations bloom across a two-layer neural network. Connections pulse with the strength of their influence and the final output is interpreted instantly.
                    </p>
                </div>
                <div class="mt-10 grid gap-6 sm:grid-cols-3">
                    <div class="rounded-2xl border border-slate-800 bg-slate-900/60 p-4">
                        <p class="text-xs uppercase tracking-wide text-slate-400">Decision output</p>
                        <p class="mt-2 text-2xl font-semibold text-white" id="output-value">0.50</p>
                        <p class="mt-1 text-xs text-slate-500" id="output-label">Neutral confidence</p>
                    </div>
                    <div class="rounded-2xl border border-slate-800 bg-slate-900/60 p-4">
                        <p class="text-xs uppercase tracking-wide text-slate-400">Hidden activations</p>
                        <p class="mt-2 text-2xl font-semibold text-white" id="hidden-summary">[0.50, 0.50, 0.50]</p>
                        <p class="mt-1 text-xs text-slate-500">Sigmoid outputs of hidden neurons</p>
                    </div>
                    <div class="rounded-2xl border border-slate-800 bg-slate-900/60 p-4">
                        <p class="text-xs uppercase tracking-wide text-slate-400">Pulse animation</p>
                        <button id="pulse-network" class="mt-2 inline-flex items-center gap-2 rounded-full border border-slate-700 px-4 py-2 text-xs font-semibold text-slate-200 hover:border-emerald-400/60 hover:text-white">Play signal flow</button>
                        <p class="mt-1 text-xs text-slate-500">Highlights each layer sequentially</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="py-16">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="grid gap-10 lg:grid-cols-[1.5fr,1fr]">
                    <div class="activations-panel p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <h2 class="text-2xl font-semibold text-white">Interactive network</h2>
                                <p class="text-sm text-slate-400">Weights are fixed—your inputs drive the activations.</p>
                            </div>
                            <span class="inline-flex items-center gap-2 rounded-full bg-emerald-500/15 px-3 py-1 text-xs font-semibold text-emerald-300">
                                <span class="h-2 w-2 rounded-full bg-emerald-300 animate-ping"></span>
                                Live
                            </span>
                        </div>
                        <div class="mt-10 relative h-[360px]" id="network-viewport">
                            <svg id="connection-layer" class="connection-layer absolute inset-0 h-full w-full pointer-events-none"></svg>
                            <div id="node-layer" class="relative flex h-full justify-between px-6">
                                <div class="flex flex-col items-center justify-evenly gap-6" id="input-layer">
                                    <div class="neuron" id="input-node-0">
                                        <span class="label">x₁</span>
                                        <span class="value" id="input-value-0">0.00</span>
                                    </div>
                                    <div class="neuron" id="input-node-1">
                                        <span class="label">x₂</span>
                                        <span class="value" id="input-value-1">0.00</span>
                                    </div>
                                </div>
                                <div class="flex flex-col items-center justify-evenly gap-6" id="hidden-layer">
                                    <div class="neuron" id="hidden-node-0">
                                        <span class="label">h₁</span>
                                        <span class="value" id="hidden-value-0">0.50</span>
                                    </div>
                                    <div class="neuron" id="hidden-node-1">
                                        <span class="label">h₂</span>
                                        <span class="value" id="hidden-value-1">0.50</span>
                                    </div>
                                    <div class="neuron" id="hidden-node-2">
                                        <span class="label">h₃</span>
                                        <span class="value" id="hidden-value-2">0.50</span>
                                    </div>
                                </div>
                                <div class="flex flex-col items-center justify-center" id="output-layer">
                                    <div class="neuron" id="output-node-0">
                                        <span class="label">ŷ</span>
                                        <span class="value" id="output-display">0.50</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="bg-slate-950/70 border border-slate-800 rounded-[28px] p-6 space-y-6">
                        <div>
                            <h3 class="text-xl font-semibold text-white">Input controls</h3>
                            <p class="mt-2 text-sm text-slate-400">Drag sliders to send different feature combinations into the network.</p>
                        </div>
                        <div class="space-y-4">
                            <div>
                                <label for="input-slider-0" class="text-xs uppercase tracking-wide text-slate-400">Feature x₁</label>
                                <div class="mt-2 flex items-center gap-4">
                                    <input id="input-slider-0" type="range" min="-1" max="1" step="0.01" value="0" class="w-full accent-emerald-400" />
                                    <span id="input-slider-value-0" class="text-sm font-semibold text-emerald-300">0.00</span>
                                </div>
                            </div>
                            <div>
                                <label for="input-slider-1" class="text-xs uppercase tracking-wide text-slate-400">Feature x₂</label>
                                <div class="mt-2 flex items-center gap-4">
                                    <input id="input-slider-1" type="range" min="-1" max="1" step="0.01" value="0" class="w-full accent-emerald-400" />
                                    <span id="input-slider-value-1" class="text-sm font-semibold text-emerald-300">0.00</span>
                                </div>
                            </div>
                        </div>
                        <div>
                            <p class="text-xs uppercase tracking-wide text-slate-400">Activation narrative</p>
                            <div id="activation-log" class="mt-3 space-y-2 text-xs text-slate-300"></div>
                        </div>
                    </div>
                </div>
                <div class="mt-16 grid gap-10 lg:grid-cols-2">
                    <div class="insight-card p-6">
                        <h3 class="text-xl font-semibold text-white">Layer-by-layer insight</h3>
                        <ul class="mt-4 space-y-3 text-sm text-slate-300">
                            <li><span class="font-semibold text-emerald-300">Input layer:</span> Represents normalized features between −1 and 1.</li>
                            <li><span class="font-semibold text-emerald-300">Hidden layer:</span> Applies weighted sums plus biases, then the sigmoid activation.</li>
                            <li><span class="font-semibold text-emerald-300">Output layer:</span> Aggregates hidden activations into a single probability-like score.</li>
                        </ul>
                    </div>
                    <div class="insight-card p-6">
                        <h3 class="text-xl font-semibold text-white">Experiment ideas</h3>
                        <ol class="mt-4 space-y-3 text-sm text-slate-300 list-decimal list-inside">
                            <li>Move x₁ positive while x₂ stays negative to see which hidden neuron dominates.</li>
                            <li>Pump both inputs high to push the output toward confident activation.</li>
                            <li>Reset sliders to zero and trigger “Play signal flow” to watch the propagation.</li>
                        </ol>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="border-t border-slate-800/60 bg-slate-950/80">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-10 text-sm text-slate-400 flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between">
            <p>© <span id="footer-year"></span> AI Learning Lab.</p>
            <p>Visualize activations and how weights shape the final decision.</p>
        </div>
    </footer>

    <script>
        const mobileBtn = document.getElementById('mobile-menu-button');
        const mobileNav = document.getElementById('mobile-menu');
        if (mobileBtn && mobileNav) {
            mobileBtn.addEventListener('click', () => mobileNav.classList.toggle('hidden'));
        }
        const yearTarget = document.getElementById('footer-year');
        if (yearTarget) {
            yearTarget.textContent = new Date().getFullYear();
        }

        const sliders = [
            document.getElementById('input-slider-0'),
            document.getElementById('input-slider-1'),
        ];
        const sliderLabels = [
            document.getElementById('input-slider-value-0'),
            document.getElementById('input-slider-value-1'),
        ];
        const inputValueLabels = [
            document.getElementById('input-value-0'),
            document.getElementById('input-value-1'),
        ];
        const hiddenValueLabels = [
            document.getElementById('hidden-value-0'),
            document.getElementById('hidden-value-1'),
            document.getElementById('hidden-value-2'),
        ];
        const outputValue = document.getElementById('output-value');
        const outputDisplay = document.getElementById('output-display');
        const outputLabel = document.getElementById('output-label');
        const hiddenSummary = document.getElementById('hidden-summary');
        const activationLog = document.getElementById('activation-log');
        const pulseButton = document.getElementById('pulse-network');

        const networkViewport = document.getElementById('network-viewport');
        const connectionLayer = document.getElementById('connection-layer');

        const weightsIH = [
            [1.2, -0.8],
            [-1.0, 1.3],
            [0.6, 1.4],
        ];
        const biasH = [0.2, -0.4, 0.1];
        const weightsHO = [1.1, -1.3, 1.7];
        const biasO = -0.05;

        const nodes = {
            input: [
                document.getElementById('input-node-0'),
                document.getElementById('input-node-1'),
            ],
            hidden: [
                document.getElementById('hidden-node-0'),
                document.getElementById('hidden-node-1'),
                document.getElementById('hidden-node-2'),
            ],
            output: [document.getElementById('output-node-0')],
        };

        const connections = [];

        function sigmoid(x) {
            return 1 / (1 + Math.exp(-x));
        }

        function drawConnections() {
            connections.length = 0;
            connectionLayer.innerHTML = '';
            const viewportRect = networkViewport.getBoundingClientRect();

            const addConnection = (fromNode, toNode, weight, metadata) => {
                const fromRect = fromNode.getBoundingClientRect();
                const toRect = toNode.getBoundingClientRect();
                const x1 = fromRect.left - viewportRect.left + fromRect.width / 2;
                const y1 = fromRect.top - viewportRect.top + fromRect.height / 2;
                const x2 = toRect.left - viewportRect.left + toRect.width / 2;
                const y2 = toRect.top - viewportRect.top + toRect.height / 2;
                const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
                line.setAttribute('x1', x1);
                line.setAttribute('y1', y1);
                line.setAttribute('x2', x2);
                line.setAttribute('y2', y2);
                line.setAttribute('stroke-width', 2 + Math.abs(weight));
                line.setAttribute('stroke', weight >= 0 ? 'rgba(16, 185, 129, 0.3)' : 'rgba(248, 113, 113, 0.3)');
                line.setAttribute('stroke-linecap', 'round');
                connectionLayer.appendChild(line);
                connections.push({ line, weight, ...metadata });
            };

            weightsIH.forEach((weights, hIndex) => {
                weights.forEach((weight, iIndex) => {
                    addConnection(nodes.input[iIndex], nodes.hidden[hIndex], weight, {
                        fromLayer: 'input',
                        fromIndex: iIndex,
                        toLayer: 'hidden',
                        toIndex: hIndex,
                    });
                });
            });
            weightsHO.forEach((weight, hIndex) => {
                addConnection(nodes.hidden[hIndex], nodes.output[0], weight, {
                    fromLayer: 'hidden',
                    fromIndex: hIndex,
                    toLayer: 'output',
                    toIndex: 0,
                });
            });
        }

        function describeOutput(value) {
            if (value > 0.75) return 'High confidence positive';
            if (value > 0.6) return 'Positive leaning';
            if (value < 0.25) return 'High confidence negative';
            if (value < 0.4) return 'Negative leaning';
            return 'Neutral confidence';
        }

        function updateActivations() {
            const inputs = sliders.map((slider) => parseFloat(slider.value));
            inputs.forEach((val, idx) => {
                sliderLabels[idx].textContent = val.toFixed(2);
                inputValueLabels[idx].textContent = val.toFixed(2);
            });

            const hidden = weightsIH.map((weights, index) => {
                const weightedSum = weights.reduce((acc, weight, i) => acc + weight * inputs[i], biasH[index]);
                return sigmoid(weightedSum);
            });
            const output = sigmoid(hidden.reduce((acc, activation, index) => acc + activation * weightsHO[index], biasO));

            nodes.input.forEach((node, index) => {
                const magnitude = Math.abs(inputs[index]);
                node.style.background = `radial-gradient(circle at center, rgba(244, 114, 182, ${0.25 + magnitude * 0.5}), rgba(15, 23, 42, 0.92) 70%)`;
                node.classList.toggle('active', magnitude > 0.6);
            });

            hidden.forEach((value, index) => {
                hiddenValueLabels[index].textContent = value.toFixed(3);
                const intensity = value;
                const node = nodes.hidden[index];
                node.style.background = `radial-gradient(circle at center, rgba(52, 211, 153, ${0.28 + intensity * 0.55}), rgba(15, 23, 42, 0.92) 70%)`;
                node.classList.toggle('active', intensity > 0.6);
            });

            nodes.output[0].style.background = `radial-gradient(circle at center, rgba(129, 140, 248, ${0.3 + output * 0.5}), rgba(15, 23, 42, 0.92) 70%)`;
            nodes.output[0].classList.toggle('active', output > 0.65);
            outputDisplay.textContent = output.toFixed(3);
            outputValue.textContent = output.toFixed(3);
            outputLabel.textContent = describeOutput(output);
            hiddenSummary.textContent = `[${hidden.map((v) => v.toFixed(2)).join(', ')}]`;

            connections.forEach((connection) => {
                let activation = 0;
                if (connection.fromLayer === 'input') {
                    activation = Math.abs(inputs[connection.fromIndex]);
                } else if (connection.fromLayer === 'hidden') {
                    activation = hidden[connection.fromIndex];
                }
                const weightStrength = Math.abs(connection.weight);
                const opacity = Math.min(1, 0.25 + weightStrength * 0.3 + activation * 0.6);
                const strokeWidth = 1.8 + weightStrength * (0.7 + activation * 1.1);
                const color = connection.weight >= 0 ? `rgba(16, 185, 129, ${opacity})` : `rgba(248, 113, 113, ${opacity})`;
                connection.line.setAttribute('stroke', color);
                connection.line.setAttribute('stroke-width', strokeWidth);
            });

            const narrative = document.createElement('div');
            narrative.className = 'rounded-xl border border-slate-800 bg-slate-900/50 px-3 py-2';
            narrative.textContent = `x = [${inputs.map((v) => v.toFixed(2)).join(', ')}] → h = [${hidden.map((v) => v.toFixed(2)).join(', ')}] → ŷ = ${output.toFixed(2)} (${describeOutput(output).toLowerCase()})`;
            activationLog.prepend(narrative);
            while (activationLog.children.length > 6) {
                activationLog.removeChild(activationLog.lastChild);
            }
        }

        sliders.forEach((slider) => slider.addEventListener('input', updateActivations));

        let pulseTimeouts = [];
        function playPulse() {
            pulseTimeouts.forEach(clearTimeout);
            pulseTimeouts = [];
            const layers = [nodes.input, nodes.hidden, nodes.output];
            layers.forEach((layer, index) => {
                const timeout = setTimeout(() => {
                    layer.forEach((node) => {
                        node.classList.add('active');
                        setTimeout(() => node.classList.remove('active'), 460);
                    });
                }, index * 420);
                pulseTimeouts.push(timeout);
            });
        }

        pulseButton.addEventListener('click', playPulse);

        window.addEventListener('resize', () => {
            drawConnections();
            updateActivations();
        });

        drawConnections();
        updateActivations();
    </script>
</body>
</html>
